/** Tagove! **/!function(){var e="prototype",t="undefined",a="function",i=i||{};i.scope={},i.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},i.arrayIterator=function(e){return{next:i.arrayIteratorImpl(e)}},i.m=function(e){var a=t!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return a?a.call(e):i.arrayIterator(e)},i.ASSUME_ES5=!1,i.ASSUME_NO_NATIVE_MAP=!1,i.ASSUME_NO_NATIVE_SET=!1,i.SIMPLE_FROUND_POLYFILL=!1,i.ISOLATE_POLYFILLS=!1,i.defineProperty=i.ASSUME_ES5||a==typeof Object.defineProperties?Object.defineProperty:function(t,a,i){return t==Array[e]||t==Object[e]?t:(t[a]=i.value,t)},i.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var a=e[t];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")},i.global=i.getGlobal(this),i.IS_SYMBOL_NATIVE=a===typeof Symbol&&"symbol"==typeof Symbol("x"),i.TRUST_ES6_POLYFILLS=!i.ISOLATE_POLYFILLS||i.IS_SYMBOL_NATIVE,i.polyfills={},i.propertyToPolyfillSymbol={},i.POLYFILL_PREFIX="$jscp$",i.polyfill=function(e,t,a,n){t&&(i.ISOLATE_POLYFILLS?i.polyfillIsolated(e,t,a,n):i.polyfillUnisolated(e,t,a,n))},i.polyfillUnisolated=function(e,t,a,n){for(a=i.global,e=e.split("."),n=0;n<e.length-1;n++){var r=e[n];if(!(r in a))return;a=a[r]}(t=t(n=a[e=e[e.length-1]]))!=n&&null!=t&&i.defineProperty(a,e,{configurable:!0,writable:!0,value:t})},i.polyfillIsolated=function(e,t,a,n){var r=e.split(".");e=1===r.length,n=r[0],n=!e&&n in i.polyfills?i.polyfills:i.global;for(var s=0;s<r.length-1;s++){var o=r[s];if(!(o in n))return;n=n[o]}r=r[r.length-1],null!=(t=t(a=i.IS_SYMBOL_NATIVE&&"es6"===a?n[r]:null))&&(e?i.defineProperty(i.polyfills,r,{configurable:!0,writable:!0,value:t}):t!==a&&(i.propertyToPolyfillSymbol[r]=i.IS_SYMBOL_NATIVE?i.global.Symbol(r):i.POLYFILL_PREFIX+r,r=i.propertyToPolyfillSymbol[r],i.defineProperty(n,r,{configurable:!0,writable:!0,value:t})))},i.s=function(){},i.polyfill("Symbol",function(t){if(t)return t;var a=function(e,t){this.x$$symbol$id_=e,i.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};a[e].toString=function(){return this.x$$symbol$id_};var n=0,r=function(e){if(this instanceof r)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(e||"")+"_"+n++,e)};return r},"es6","es3"),i.sIterator=function(){},i.polyfill("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var n="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<10;r++){var s=i.global[n[r]];a===typeof s&&a!=typeof s[e][t]&&i.defineProperty(s[e],t,{configurable:!0,writable:!0,value:function(){return i.iteratorPrototype(i.arrayIteratorImpl(this))}})}return t},"es6","es3"),i.sAsyncIterator=function(){},i.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},i.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var a=0,i={next:function(){if(a<e.length){var n=a++;return{value:t(n,e[n]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},i.polyfill("Array[c$pr].keys",function(e){return e||function(){return i.iteratorFromArray(this,function(e){return e})}},"es6","es3"),i.owns=function(t,a){return Object[e].hasOwnProperty.call(t,a)},i.assign=i.TRUST_ES6_POLYFILLS&&a==typeof Object.assign?Object.assign:function(e,t){for(var a=1;a<arguments.length;a++){var n=arguments[a];if(n)for(var r in n)i.owns(n,r)&&(e[r]=n[r])}return e},i.polyfill("Object.assign",function(e){return e||i.assign},"es6","es3"),$tgwbpk([15],{401:function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(11),l=r(451),p=r(4),c=r(2),d=r(9),h=r(12),u=r(237);(a=function(e,a,n){var r=this;s.a.create(this),this.app=e,this.document=a,this.window=n,this.blocks=[],this.sheet_loaded=this.disposed=!1;var o=this;if(this.handleMessage=function(e){if("https://widget-apps.acquire.io"==e.origin.substr(0,30)&&e.data&&p.a.safeType(e.data.acquireSheet,"Object")&&p.a.safeType(e.data.acquireSheet.type,"String")&&o.app.threadManager().active_sheet())switch(e.data.acquireSheet.type){case"sheet-loaded":o.sheet_loaded||(o.sheet_loaded=!0,o.app.threadManager().active_sheet().formProxy(e.target.document));break;case"submit-sheet":o.sheet_loaded&&o.app.threadManager&&(o.app.threadManager().active_sheet().closeSheet(),o.app.threadManager().active_sheet().submitMessengerSheetAction(e.data.acquireSheet.payload||{}));break;case"close":o.sheet_loaded&&o.app.threadManager&&o.app.threadManager().active_sheet().closeSheet();break;case"finish-navigation":o.app.threadManager().active_sheet().sheet_is_loading()&&o.app.threadManager().active_sheet().sheet_is_loading(!1);break;case"set-title":o.sheet_loaded&&o.app.threadManager&&p.a.safeType(e.data.acquireSheet.payload,"Object")&&p.a.safeType(e.data.acquireSheet.payload.title,"String"),""!=e.data.acquireSheet.payload.title&&o.app.threadManager().active_sheet().sheet_header_title(e.data.acquireSheet.payload.title)}},this.window.addEventListener("message",this.handleMessage,!1),this.apps_configurator_loading=c.a.observable(null),this.is_home_block_loaded=c.a.observable(!1),this.is_home_block_loading=c.a.observable(!1),"frontend"==this.app.type){this.updateHmBlocks=function(){if(!p.a.safeType(r.app,"Undefined")){var e=r.app.status(),t=r.app.ui.status();r.app.if("thread_manager_ready",function(){if(!p.a.safeType(r.app,"Undefined")){var a=r.app.threadManager().status();"thread_chat"!=e||"max"!=t||"list"!=a&&"new"!=a||setTimeout(function(){if(!p.a.safeType(r.app,"Undefined")){for(var e=i.m(r.blocks),t=e.next();!t.done;t=e.next())if("home"==(t=t.value).show_in){var a=t.render();r.updateHomeCanvasElements(t,a)}r.removeHomeCanvasElements()}},100)}})}},this.app.status.subscribe(function(e){"thread_chat"==e&&r.updateHmBlocks&&r.updateHmBlocks()}),this.app.ui.status.subscribe(function(e){"max"==e&&r.updateHmBlocks&&r.updateHmBlocks()}),this.app.if("thread_manager_ready",function(){r.app&&r.app.threadManager().status.subscribe(function(e){"list"!=e&&"new"!=e||!r.updateHmBlocks||r.updateHmBlocks()})});var l=function(e){if(e=void 0!==e&&e,r.app)if(r.is_home_block_loaded()||r.is_home_block_loading()){for(var a=(e=i.m(r.blocks)).next();!a.done;a=e.next())if("home"==(a=a.value).show_in){var n=a.render();r.updateHomeCanvasElements(a,n)}r.removeHomeCanvasElements()}else r.is_home_block_loading(!0),r.app.socket.emit("home_blocks",e,function(e,a){if(t!=typeof r.app)if(r.is_home_block_loading(!1),e)console.error(e);else if(r.is_home_block_loaded(!0),a){for(a=(e=i.m(a)).next();!a.done;a=e.next()){(a=a.value).show_in="home";var n=(a=r.app.ui.blockManager().addBlock(a)).render();r.updateHomeCanvasElements(a,n)}r.removeHomeCanvasElements()}})};this.app.session.started?l():this.app.session.on("ready",function(){l()})}})[e].openUrlInSheet=function(e,t,a){var i=this;t=void 0===t?null:t,a=void 0===a?"GET":a,t=null==t?this.app.getTransMsg("Help Center"):t;var n={};n.sheet_is_loading=c.a.observable(!1),n.sheet_is_closing=c.a.observable(!1),n.sheet_header_title=c.a.observable(t),n.actionUrl=function(){return e},n.actionMethod=function(){return a||"GET"},n.formProxy=function(){var e=i.document.querySelector(".sheet-view-form");e&&(e.submit(),setTimeout(function(){n&&n.sheet_is_loading(!1)},300))},n.closeSheet=function(){n.sheet_is_closing(!0),i.app.threadManager().sheet_close_reset_status()&&i.app.status(i.app.threadManager().sheet_close_reset_status()),setTimeout(function(){if(!p.a.safeType(i,"Undefined")){n.active=null,i.app.threadManager().active_sheet(null),i.sheet_loaded=!1,n.sheet_is_loading(!1),n.sheet_is_closing(!1),n.sheet_header_title(null);for(var e in n)d.a.disposeKoItem(n[e]),n[e]=void 0;n=void 0}},300)},n.getSheetsubmitData=function(){return"{}"},this.app.threadManager().active_sheet(n)},a[e].sanitiseData=function(e){if(null==e)return e;var t=function(e){return Object.keys(e).forEach(function(i){null!==e[i]&&p.a.safeType(e[i],"Object")?e[i]=t(e[i]):null!==e[i]&&p.a.safeType(e[i],"Array")?e[i]=a(e[i]):"string"==typeof e[i]&&(e[i]=u.a.sanitize(e[i]))}),e},a=function(e){return e.forEach(function(i){null!==e[i]&&p.a.safeType(e[i],"Object")?e[i]=t(e[i]):null!==e[i]&&p.a.safeType(e[i],"Array")?e[i]=a(o[i]):"string"==typeof e[i]&&(e[i]=u.a.sanitize(e[i]))}),e};return"string"==typeof e?u.a.sanitize(e):p.a.safeType(e,"Object")?t(e):p.a.safeType(e,"Array")?a(e):e},a[e].reArrangeHomeApps=function(e){for(var t=[],a=(this.app.settings().home_card_ids||"").split(","),n=(e||"").split(","),r=(a=i.m(a)).next();!r.done;r=a.next())-1!=(r=n.indexOf(r.value))&&t.push(r);if(t){if(n=this.document.querySelector(".block-lists")){var s=n.children;for(t=t.map(function(e){return s[e]}),a=(t=i.m(t)).next();!a.done;a=t.next())n.append(a.value)}this.app.settings().home_card_ids=e}},a[e].removeHomeCanvasElements=function(){if(this.is_home_block_loaded()){for(var e=(this.app.settings().home_card_ids||"").split(","),t=i.m(this.blocks),a=t.next();!a.done;a=t.next())"home"==(a=a.value).show_in&&a.props.block_id&&-1!=(a=e.indexOf(""+a.props.block_id))&&e.splice(a,1);for(t=(e=i.m(e)).next();!t.done;t=e.next())if(t=this.document.querySelector(".board-list-item-"+t.value)){for(t.classList.remove("loading-board"),t.removeAttribute("data-bind");t.firstChild;)t.removeChild(t.firstChild);t.remove()}}},a[e].updateHomeCanvasElements=function(e,t,a){var i=this;if(a=void 0!==a&&a,"thread_message"==e.show_in||"conversation"==e.show_in){var n=function(){var a=i.document.querySelector(".acquire-widget-board-block-"+e.props.block_id);if(a){for(a=a.parentNode;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(t)}else e.elements=t};if(e.thread_id&&e.conversation_id)if("frontend"==this.app.type){if((n=this.app.threadManager().findThreadByPK(e.thread_id))&&(n.updateMessage(e.conversation_id,{elements:t}),n.chat()&&a))try{var r={b_id:e.props.block_id,canvas:JSON.stringify(e.props.canvas)},s=e.app_data;(s&&("4c14f19d4a"===s.app_uid||"PII Form"===s.name)||253==e.app_id)&&(r.ephemeral_show_value=!0),n.chat().broadcast("update_thread_message",r)}catch(e){console.error(e.message)}}else n();else n()}else if("outreach"==e.show_in){if(a=this.document.querySelector(".acquire-widget-board-block-"+e.props.block_id)){for(a=a.parentNode;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(t)}}else if("home"==e.show_in)if(a=this.document.querySelector(".board-list-item-"+e.props.block_id+" .home-board-content"),(r=this.document.querySelector(".board-list-item-"+e.props.block_id+" .home-status-board"))&&r.parentNode&&r.parentNode.removeChild(r),a){for(a.parentNode.classList.remove("loading-board");a.firstChild;)a.removeChild(a.firstChild);a.appendChild(t)}else a&&(r=e.createElement("div",["home-board-content"]),a.appendChild(r));else if("dialog"==e.show_in){var o=null,l=function(){if(o){for(o.parentNode.classList.remove("loading-board");o.firstChild;)o.removeChild(o.firstChild);o.appendChild(t)}};if(null==(a=document.querySelector(".acq-alert-wrap"))){var p=null,d=null,u=null;h.a.draw(this.app.getTransMsg(this.app.default_text.chat_form_heading)+":",function(t,a){var n=t.querySelector(".content");(o=t.createElement("div")).classList.add("content-components"),n.appendChild(o),d=t.querySelector("#aio-container");var r=t.querySelector(".title"),s=t.querySelector(".header-wrapper");l();var h=t.createElement("div");return h.innerHTML="\x3c!-- ko with:$root.threadManager() --\x3e\x3c!-- ko if:active_sheet() && active_sheet().show_in == 'dialog' --\x3e<div class=\"pop-sheet-wrapper\">\x3c!-- ko template: { name: 'sheet-view' } --\x3e\x3c!-- /ko --\x3e</div>\x3c!-- /ko --\x3e\x3c!-- /ko --\x3e",t=t.createElement("span"),t.innerHTML='\x3c!-- ko if:$root.threadManager().active_sheet() --\x3e <a href="javascript:;" class="back" data-bind="click:function(){$root.threadManager().active_sheet().closeSheet()}"><svg class="header-back-action-button-back-icon" width="16" height="18" viewBox="0 0 12 12"><path fill="#000" fill-rule="nonzero" d="M2.146 6.63l4.291 4.296a.63.63 0 0 1-.889.89L.188 6.448a.628.628 0 0 1-.004-.893L5.548.185a.628.628 0 1 1 .89.89L2.145 5.37h9.225a.629.629 0 0 1 0 1.258H2.146z" opacity=".8"></path> </svg></a> \x3c!-- /ko --\x3e',s.appendChild(t),n.appendChild(h),s=.8*window.innerHeight-55,o.setAttribute("data-bind","attr:($root.threadManager && $root.threadManager().active_sheet() ? {'style' : 'height:"+s+"px; overflow: hidden;'} : {'style' : 'max-height:"+s+"px;'})"),r.setAttribute("data-bind","css:({'is-back-btn': $root.threadManager().active_sheet()}), text:$root.threadManager().active_sheet() ? $root.threadManager().active_sheet().sheet_header_title() : $root.getTransMsg($root.default_text.chat_form_heading)"),c.a.applyBindings(i.app,d),a.removeEventListener("message",i.handleMessage,!1),a.addEventListener("message",i.handleMessage,!1),p=a,u=e.is_loading.subscribe(function(t){t?n.appendChild(e.createLoaderElementWithWrapper()):(t=n.querySelector(".content .loading-board.dialog-board"))&&t.parentNode&&t.parentNode.removeChild(t)}),".call-request-zone"},{},!1,!1,!0,function(){i.app.threadManager().active_sheet()&&i.app.threadManager().active_sheet().closeSheet(function(){i.removeBlock(e)}),d&&c.a.unapplyBindings(d,!1),p&&p.removeEventListener("message",i.handleMessage,!1),u&&u.dispose()})}else a=a.querySelector("iframe"),(a=a.contentWindow||a.contentDocument)&&(o=a.document.querySelector(".content div"),l())}},a[e].dispose=function(){this.window.removeEventListener("message",this.handleMessage);for(var e=i.m(this.blocks),t=e.next();!t.done;t=e.next())(t=t.value).dispose&&t.dispose();for(var a in this)d.a.disposeKoItem(this[a]),this[a]=void 0},a[e].addBlock=function(e){if(e=void 0===e?{}:e,t!=typeof e.uri||p.a.safeType(e,"Array")){var a=e.uri?this.getBlockByURI(e.uri):null;return null!=a?a.update(e):(a=new l.a(this,e),this.blocks.push(a),a)}return null},a[e].removeBlock=function(e){var t=this.getBlockIndex(e);-1!=t&&(e.dispose(),this.blocks.splice(t,1))},a[e].removeTempBlocks=function(){if(0<this.blocks.length)for(var e=i.m(this.blocks),a=e.next();!a.done;a=e.next())if(a=a.value,t==typeof a.props.block_id||null==a.props.block_id||0==a.props.block_id){var n=this.getBlockIndex(a);-1!=n&&(a.dispose(),this.blocks.splice(n,1))}},a[e].getBlockByURI=function(e){var t=null;if(e&&0<this.blocks.length)for(var a=i.m(this.blocks),n=a.next();!n.done;n=a.next())(n=n.value).uri==e&&(t=n);return t},a[e].getBlockByID=function(e){var t=null;if(e&&0<this.blocks.length)for(var a=i.m(this.blocks),n=a.next();!n.done;n=a.next())(n=n.value).props.block_id==e&&(t=n);return t},a[e].getBlockIndex=function(e){return this.blocks.indexOf(e)},n.default=a},451:function(a,n,r){var s=r(4),o=r(2),l=r(452),p=r(9),c=r(12),d=r(237),h="svg path circle rect line g polygon linearGradient stop ellipse defs text".split(" ");(a=function(e,a){var i=this;this.manager=e,this.props=a,this.uri=a.uri,this.app_id=a.messenger_app_id,this.app_data=t!=typeof a.messenger_app_id&&e.getAppById?e.getAppById(a.messenger_app_id):{},this.components=[],this.canvas_content_url=!1,this.elements=null,this.class_prefix="acquire-widget-board-",this.show_in=a.show_in?a.show_in:null,this.conversation_id=a.conversation_id?a.conversation_id:null,this.thread_id=a.thread_id?a.thread_id:null,this.input_values={},this.id_map={},this.active=null,this.is_loading=o.a.observable(!1),this.is_initializing=o.a.observable(!1),this.sheet_is_loading=o.a.observable(!1),this.sheet_is_closing=o.a.observable(!1),this.components_card=!0,this.ephemeral_show_value=!1,this.sheet_header_title=o.a.observable(e.app.getTransMsg("Help Center")),this._dispose=[],this.update(a),this.is_loading.subscribe(function(e){if(!s.a.safeType(i.manager,"Undefined")){var t=i.manager.document.querySelector(".acquire-widget-board-block-"+i.props.block_id);"frontend"!=i.manager.app.type&&i.manager.apps_configurator_loading(!0),e||i.manager.apps_configurator_loading(!1),t&&"dialog"!=i.show_in&&(e?(t.classList.add("loading-board"),"frontend"==i.manager.app.type&&t.appendChild(i.createLoaderElement())):(t.classList.remove("loading-board"),(e=t.querySelector("apps-block-loading"))&&t.removeChild(e)))}})})[e].c=function(e){return this.class_prefix+e},a[e].update=function(e){if(e&&t!=typeof e.canvas)if(this.props.canvas=e.canvas,e&&t!=typeof e.stored_data&&(this.props.stored_data=Object.assign({},e.stored_data)),t!=typeof e.uri&&(this.uri=this.props.uri=e.uri),t!=typeof e.conversation_id&&(this.conversation_id=e.conversation_id),t!=typeof e.show_in&&(this.show_in=e.show_in),t!=typeof e.thread_id&&(this.thread_id=e.thread_id),e.canvas.content&&t!=typeof e.canvas.content.components){if(e.canvas.content.components&&s.a.safeType(e.canvas.content.components,"Array")){this.components=e.canvas.content.components;for(var a=function(){return"_"+Math.random().toString(36).substr(2,9)},n=0,r=i.m(this.components),o=r.next();!o.done;o=r.next()){if(o=o.value,!s.a.safeType(o.id,"Undefined")&&o.id&&(this.id_map[o.id]=a()),!s.a.safeType(o.items,"Undefined")&&s.a.safeType(o.items,"Array")&&!s.a.safeType(o.type,"Undefined")&&"checkbox"===o.type)for(var l=i.m(o.items),p=l.next();!p.done;p=l.next())p=p.value,!s.a.safeType(p.id,"Undefined")&&o.id&&(this.id_map[o.id+"_"+p.id]=a());!s.a.safeType(o.html,"Undefined")&&o.html&&(this.components[n].html=null),n++}}}else e.canvas.content_url&&(this.canvas_content_url=!0,this.getMessengerContentAction());else if(e&&s.a.safeType(e,"Array"))for(this.components=e,this.components_card=!1,a=function(){return"_"+Math.random().toString(36).substr(2,9)},n=0,r=i.m(this.components),o=r.next();!o.done;o=r.next())o=o.value,!s.a.safeType(o.id,"Undefined")&&o.id&&(this.id_map[o.id]=a()),!s.a.safeType(o.html,"Undefined")&&o.html&&(this.components[n].html=null),n++;return e&&t!=typeof e.results&&this.initializeMessengerCardAction(e.results),this},a[e].hasSomeParentTheClass=function(e,t){return!!(e.className&&0<=e.className.split(" ").indexOf(t))||e.parentNode&&this.hasSomeParentTheClass(e.parentNode,t)},a[e].onAction=function(e,t){switch(t.action.type){case"submit":e.classList.add("submitting_component"),this.submitMessengerCardAction(t.id,t);break;case"url":this.openUrlInNewWindow(t.action.url);break;case"msg-btn":this.manager.app.startChatFromTrigger(t.action.url);break;case"sheet":"frontend"==this.manager.app.type&&(this.active=t,this.sheet_is_loading(!0),this.manager.app.threadManager().active_sheet(this))}},a[e].initializeMessengerCardAction=function(e){var a=this,i={app_id:this.app_id,options:e,platform:"web",v:"1"};"frontend"==this.manager.app.type||"home"!=this.manager.apps_configurator_for()&&"angular_app_view"!=this.manager.apps_configurator_for()||(i.home=!0),"frontend"!=this.manager.app.type&&"dialog"==this.show_in&&(i.ephemeral=!0),"frontend"!=this.manager.app.type&&this.conversation_id&&(i.conversation_id=this.conversation_id),this.is_loading(!0),this.is_initializing(!0),this.manager.app.socket.emit("initialize_blocks",i,function(e,n){s.a.safeType(a.manager,"Undefined")||(a.is_loading(!1),a.is_initializing(!1),e?console.error(e):n&&(n&&t!=typeof n.canvas?i.ephemeral?setTimeout(function(){a.manager&&(c.a.close(),a.manager.apps_configurator_active(null),a.manager.apps_configurator_for(null),a.manager.removeBlock(a))},1e3):(a.props.block_id=n.id,"angular_app_view"==a.manager.apps_configurator_for()?(a.show_in="home",n.show_in="home",n=a.update(n).render(),a.manager.initializeBlocks(a,n,!0)):(e=a.update(n).render(),a.manager.initializeBlocks(a,e,!1,n))):console.error("err: Response result key in initialize")))})},a[e].submitMessengerCardAction=function(e,t){var a=this;e={app_id:this.app_id,lang:this.manager.app.lang(),client_key:btoa(encodeURIComponent(JSON.stringify(this.manager.sanitiseData(this.manager.app.myself())))),action_id:e,current_canvas:this.props,a:t,values:this.input_values,referer:window.location.href,uri:this.uri,user_id:this.manager.app.myself().type+"-"+this.manager.app.myself().id,platform:"web",location:this.show_in,v:"1"},"frontend"==this.manager.app.type||"home"!=this.manager.apps_configurator_for()&&"angular_app_view"!=this.manager.apps_configurator_for()||(e.home=!0),this.conversation_id&&(e.conversation_id=this.conversation_id),this.thread_id&&(e.thread_id=this.thread_id);var i="frontend"==this.manager.app.type?"submit_blocks":"configure_blocks";this.is_loading(!0),this.manager.app.socket.emit(i,e,function(e,t){if(!s.a.safeType(a.manager,"Undefined"))if(a.is_loading(!1),e)console.error(e);else if(t)if("configure_blocks"==i)t=a.update(t).render(),a.manager.updateBlocks(a,t);else{e=a.update(t).render();var n=!1;t&&s.a.safeType(t.event,"Object")&&t.event.type&&"completed"==t.event.type&&(n=!0),a.manager.updateHomeCanvasElements(a,e,n)}})},a[e].submitMessengerSheetAction=function(e){var t=this;e={app_id:this.app_id,lang:this.manager.app.lang(),client_key:btoa(encodeURIComponent(JSON.stringify(this.manager.sanitiseData(this.manager.app.myself())))),current_canvas:this.props,values:e,referer:window.location.href,uri:this.uri,user_id:this.manager.app.myself().type+"-"+this.manager.app.myself().id,platform:"web",v:"1"},this.conversation_id&&(e.conversation_id=this.conversation_id),this.thread_id&&(e.thread_id=this.thread_id),this.is_loading(!0),this.manager.app.socket.emit("submit_sheet",e,function(e,a){s.a.safeType(t.manager,"Undefined")||(t.is_loading(!1),e?console.error(e):a&&a&&"object"==typeof a.canvas&&(e=t.update(a).render(),t.manager.updateHomeCanvasElements(t,e)))})},a[e].getSheetsubmitData=function(){var e={app_id:this.app_id,lang:this.manager.app.lang(),client_key:btoa(encodeURIComponent(JSON.stringify(this.manager.sanitiseData(this.manager.app.myself())))),current_canvas:this.props,referer:window.location.href,uri:this.uri,user_id:this.manager.app.myself().type+"-"+this.manager.app.myself().id,platform:"web",v:"1"};return JSON.stringify(e)},a[e].getMessengerContentAction=function(){var e=this,t={app_id:this.app_id,lang:this.manager.app.lang(),client_key:btoa(encodeURIComponent(JSON.stringify(this.manager.sanitiseData(this.manager.app.myself()?this.manager.app.myself():"")))),current_canvas:this.props,referer:window.location.href,uri:this.uri,user_id:this.manager.app.myself()?this.manager.app.myself().type+"-"+this.manager.app.myself().id:"",platform:"web",v:"1"};this.is_loading(!0),this.manager.app.socket.emit("app_initial_content",t,function(t,a){s.a.safeType(e.manager,"Undefined")||(e.is_loading(!1),t?console.error(t):a&&a&&"object"==typeof a.canvas&&("frontend"==e.manager.app.type?(a=e.update(a).render(),e.manager.updateHomeCanvasElements(e,a)):(e.props.block_id=a.id,"angular_app_view"==e.manager.apps_configurator_for()?(e.show_in="home",a.show_in="home",t=e.update(a).render(),e.manager.initializeBlocks(e,t,!0,a,!0)):(t=e.update(a).render(),e.manager.initializeBlocks(e,t,!1,a,!0)))))})},a[e].openUrlInNewWindow=function(e){var t;(t=s.a.safeType(e,"String")&&""!=e)&&(t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)),t&&window.open(e,"_blank").focus()},a[e].onValueChange=function(e,t,a){switch(t.type){case"input":this.input_values[t.id]=e.value,t.value=e.value,13!=a.keyCode||"keydown"!=a.type||a.shiftKey||this.onAction(e,t);break;case"single-select":this.input_values[t.id]=e.value,t.value=e.value;break;case"checkbox":if(t.items,s.a.safeType(t.items,"Array"))for(var n=(a=i.m(t.items)).next();!n.done;n=a.next())(n=n.value).value===e.value&&(this.input_values[t.id+"_"+n.id]=e.checked?e.value:"",n.checked=e.checked);break;case"radio":case"star-rating":s.a.safeType(e.checked,"Undefined")||(this.input_values[t.id]=e.checked?e.value:"",t.value=e.value);break;default:this.input_values[t.id]=e.value,t.value=e.value}},a[e].actionUrl=function(){return this.active&&this.active.action.url?this.active.action.url:null},a[e].actionMethod=function(){return this.active&&this.active.action.method?this.active.action.method:"POST"},a[e].dispose=function(){for(var e=i.m(this._dispose),t=e.next();!t.done;t=e.next())(t=t.value)();this._dispose=[];for(var a in this)p.a.disposeKoItem(this[a]),this[a]=void 0},a[e].formProxy=function(e){var t=this;(e=e.querySelector(".sheet-view-form"))&&(e.submit(),setTimeout(function(){t.manager&&t.sheet_is_loading()&&t.sheet_is_loading(!1)},3e3))},a[e].closeSheet=function(e){var t=this;e=void 0===e?null:e,this.sheet_is_closing(!0),this.manager.app.threadManager().sheet_close_reset_status()&&this.manager.app.status(this.manager.app.threadManager().sheet_close_reset_status()),setTimeout(function(){s.a.safeType(t.manager,"Undefined")||(t.active=null,t.manager.app.threadManager().active_sheet(null),t.manager.sheet_loaded=!1,t.sheet_is_loading(!1),t.sheet_is_closing(!1),t.sheet_header_title(t.manager.app.getTransMsg("Help Center")),e&&e())},300)},a[e].vimeoId=function(e){-1<e.indexOf("#")&&(e=e.split("#")[0]),-1<e.indexOf("?")&&(e=e.split("?")[0]);var t;return/https?:\/\/vimeo\.com\/[0-9]+$|https?:\/\/player\.vimeo\.com\/video\/[0-9]+$|https?:\/\/vimeo\.com\/channels|groups|album/gim.test(e)&&(e=e.split("/"))&&e.length&&(t=e.pop()),t},a[e].convertMedia=function(e){return/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/g.test(e)?(e=this.vimeoId(e))?(e=this.createElement("iframe",{attr:{frameborder:"0",webkitallowfullscreen:"0",mozallowfullscreen:"1",allowfullscreen:"1",src:"//player.vimeo.com/video/"+e}}),{type:"vimeo-video",value:e}):null:/(?:http?s?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?(.+)/g.test(e)?(e=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/))&&11==e[2].length?(e=e[2],e=this.createElement("iframe",{attr:{frameborder:"0",webkitallowfullscreen:"0",mozallowfullscreen:"1",allowfullscreen:"1",src:"//www.youtube.com/embed/"+e}}),{type:"youtube-video",value:e}):null:/^(http(s)?:\/\/.).*(.mp4)$/g.test(e)?(e=this.createElement("video",{attr:{autoplay:"1","webkit-playsinline":"1",playsinline:"1",muted:"1"}},[this.createElement("source",{attr:{src:e,type:"video/mp4"},text:"Your browser does not support the video tag."})]),{type:"html5-video",value:e}):null},a[e].createElement=function(e,t,a){if(t=void 0===t?{}:t,a=void 0===a?[]:a,e=-1!=h.indexOf((e||"").toLowerCase())?this.manager.document.createElementNS("http://www.w3.org/2000/svg",e):this.manager.document.createElement(e),s.a.safeType(t.classes,"Array")){var n=[];s.a.safeType(t.type,"String")&&n.push(this.c(t.type));for(var r=i.m(t.classes),o=r.next();!o.done;o=r.next())(o=o.value)&&("____"==(o||"").substr(0,4)?n.push(o.replace("____","")):n.push(this.c(s.a.safeType(t.type,"Undefined")?o:t.type+"-"+o)));e.setAttribute("class",n.join(" "))}if(s.a.safeType(t.attr,"Object"))for(n=i.m(Object.keys(t.attr)),r=n.next();!r.done;r=n.next())(r=r.value)&&e.setAttribute(r,t.attr[r]);if(s.a.safeType(t.text,"String")&&(t.text=t.text.replace(/(<([^>]+)>)/gi,""),n=Object(l.a)(t.text),n=d.a.sanitize(n),e.innerHTML=n),s.a.safeType(t.type,"String"),a)for(t=i.m(a),a=t.next();!a.done;a=t.next())(a=a.value)&&e.appendChild(a);return e},a[e].createWrapperElement=function(){var e=this,a=null;if("frontend"!=this.manager.app.type&&("home"==this.show_in||"angular_app_view"==this.show_in)&&this.props.block_id){var i=function(t){e.manager&&e.manager.removeBlock(e)};(a=this.createElement("div",{classes:["block-removable"]},[this.createElement("svg",{attr:{x:"0px",y:"0px",viewBox:"0 0 268.476 268.476"}},[this.createElement("g",{},[this.createElement("path",{attr:{style:"fill-rule:evenodd;clip-rule:evenodd;",d:"M63.119,250.254c0,0,3.999,18.222,24.583,18.222h93.072 c20.583,0,24.582-18.222,24.582-18.222l18.374-178.66H44.746L63.119,250.254z M170.035,98.442c0-4.943,4.006-8.949,8.949-8.949    c4.943,0,8.95,4.006,8.95,8.949l-8.95,134.238c0,4.943-4.007,8.949-8.949,8.949c-4.942,0-8.949-4.007-8.949-8.949L170.035,98.442z   M125.289,98.442c0-4.943,4.007-8.949,8.949-8.949c4.943,0,8.949,4.006,8.949,8.949v134.238c0,4.943-4.006,8.949-8.949,8.949   c-4.943,0-8.949-4.007-8.949-8.949V98.442z M89.492,89.492c4.943,0,8.949,4.006,8.949,8.949l8.95,134.238    c0,4.943-4.007,8.949-8.95,8.949c-4.942,0-8.949-4.007-8.949-8.949L80.543,98.442C80.543,93.499,84.55,89.492,89.492,89.492z    M218.36,35.811h-39.376V17.899C178.984,4.322,174.593,0,161.086,0L107.39,0C95.001,0,89.492,6.001,89.492,17.899v17.913H50.116  c-7.914,0-14.319,6.007-14.319,13.43c0,7.424,6.405,13.431,14.319,13.431H218.36c7.914,0,14.319-6.007,14.319-13.431  C232.679,41.819,226.274,35.811,218.36,35.811z M161.086,35.811h-53.695l0.001-17.913h53.695V35.811z"}})])])])).addEventListener("click",i),this._dispose.push(function(){a.removeEventListener("click",i)})}var n=[];return this.props&&s.a.safeType(this.props,"Array")&&(n=this.props.map(function(e){return t!==typeof e.btn_for&&"sales-bot"===e.btn_for})),n=this.createElement("div",{classes:["body-container",this.props.block_id?"block-"+this.props.block_id:null,this.components_card?null:"block-no-card",null],attr:a?{draggable:!0,"data-block":this.props.block_id}:{}},[a,this.createElement("div",{classes:["body",this.components_card?null:"block-no-card"]},[this.createElement("div",{classes:["rendered",0<=n.indexOf(!0)?"bot-box":null]},[this.createElement("div",{classes:["component-group"]})])])]),this.is_loading()&&(n.classList.add("loading-board"),n.appendChild(this.createLoaderElement())),n},a[e].createLoaderElement=function(){return this.createElement("div",{classes:["____apps-block-loading"]},[this.createElement("div",{classes:["____aio_loading"]},[this.createElement("div",{},[this.createElement("svg",{attr:{height:"100%",viewBox:"0 0 32 32",width:"100%"}},[this.createElement("circle",{attr:{cx:"16",cy:"16",fill:"none",r:"14","stroke-width":"2"}}),this.createElement("circle",{attr:{cx:"16",cy:"16",fill:"none",r:"14","stroke-width":"2"}})])])])])},a[e].createLoaderElementWithWrapper=function(){return this.createElement("div",{classes:["body-container",this.props.block_id?"block-"+this.props.block_id:null,this.components_card?null:"block-no-card","____loading-board","____dialog-board"]},[this.createLoaderElement()])},a[e].addToComponent=function(e,t){var a=this,i=this.createElement("div",{classes:["component",this.components_card?null:"block-no-card","sales-bot"===e.btn_for?"sales-bot":null]},[t]);if("button"==e.type&&s.a.safeType(e.action,"Object")&&s.a.safeType(e.action.type,"String")){var n=function(t){a.onAction(i,e)};i.addEventListener("click",n),this._dispose.push(function(){i.removeEventListener("click",n)})}return i},a[e].addClasses=function(e){var t=[];return e.style&&t.push(e.style),e.align&&t.push(e.align),e.size&&t.push(e.size),e.first_element&&t.push("first-component"),e.last_element&&t.push("last-component"),e.btn_for&&"sales-bot"===e.btn_for&&t.push("bot"),t},a[e].getProps=function(e){return Object.assign({},{classes:this.addClasses(e)},e)},a[e].renderText=function(e){var a="header"==e.style?"h2":"div";return"backend"===this.manager.app.type&&t!==typeof e.asterisk&&e.asterisk&&this.ephemeral_show_value&&(e.text=e.asterisk),a=this.createElement(a,this.getProps(e)),this.addToComponent(e,a)},a[e].renderImage=function(e){var a="100%",i="auto";return e.width&&(a=e.width+"px"),e.height&&(i=e.height+"px"),a=this.createElement("div",this.getProps(e),[this.createElement("div",{classes:["image-wrapper","image-"+(t!==typeof e.rounded&&e.rounded?"rounded":"box")]},[this.createElement("img",{attr:{style:"width: "+a+"; height: "+i+";",src:e.url}})])]),this.addToComponent(e,a)},a[e].renderList=function(e){var a=this;if(e.items,s.a.safeType(e.items,"Array")){for(var n=[],r={},o=i.m(e.items),l=o.next();!l.done;r={x$$loop$prop$item_wrapper$35:r.x$$loop$prop$item_wrapper$35,x$$loop$prop$item$34:r.x$$loop$prop$item$34,x$$loop$prop$listClickFn$36:r.x$$loop$prop$listClickFn$36},l=o.next()){if(r.x$$loop$prop$item$34=l.value,s.a.safeType(r.x$$loop$prop$item$34.action,"Object")&&s.a.safeType(r.x$$loop$prop$item$34.action.type,"String"),l=[],r.x$$loop$prop$item$34.image&&""!==r.x$$loop$prop$item$34.image){var p=this.createElement("div",{classes:["list-item-image"]},[this.createElement("div",{classes:["image-wrapper"]},[this.createElement("img",{attr:{style:(t!=typeof r.x$$loop$prop$item$34.image_width?"width: "+r.x$$loop$prop$item$34.image_width+"px;":"width: 60px")+(t!=typeof r.x$$loop$prop$item$34.image_height?"height: "+r.x$$loop$prop$item$34.image_height+"px;":""),src:r.x$$loop$prop$item$34.image}})])]);l.push(p)}var c=[],d="list-item-text-subtitle";p=["list-item"],s.a.safeType(r.x$$loop$prop$item$34.action,"Object")&&s.a.safeType(r.x$$loop$prop$item$34.action.type,"String")&&("url"!=r.x$$loop$prop$item$34.action.type||r.x$$loop$prop$item$34.action.url?(c.push("list-item-text-title-action"),d="list-item-text-subtitle-action",p.push("list-item-action")):c.push("list-item-text-title")),c=this.createElement("div",{classes:["list-item-text"]},[this.createElement("div",{classes:c,text:r.x$$loop$prop$item$34.title}),this.createElement("div",{classes:["list-item-text-subtitle"]},[this.createElement("span",{classes:[d],text:r.x$$loop$prop$item$34.subtitle})])]),l.push(c),r.x$$loop$prop$item_wrapper$35=this.createElement("div",{classes:p},l),s.a.safeType(r.x$$loop$prop$item$34.action,"Object")&&s.a.safeType(r.x$$loop$prop$item$34.action.type,"String")&&(r.x$$loop$prop$listClickFn$36=function(e){return function(t){a.onAction(e.x$$loop$prop$item_wrapper$35,e.x$$loop$prop$item$34)}}(r),r.x$$loop$prop$item_wrapper$35.addEventListener("click",r.x$$loop$prop$listClickFn$36),this._dispose.push(function(e){return function(){e.x$$loop$prop$item_wrapper$35.removeEventListener("click",e.x$$loop$prop$listClickFn$36)}}(r))),n.push(r.x$$loop$prop$item_wrapper$35)}return n=this.createElement("div",this.getProps(e),n),this.addToComponent(e,n)}return null},a[e].renderInput=function(e){var a=this,i=s.a.safeType(e.value,"String")&&e.value?e.value:"";"backend"===this.manager.app.type&&t!==typeof e.asterisk&&e.asterisk&&this.canvas_content_url&&(i=e.asterisk);var n=this.createElement("input",{attr:{id:this.id_map[e.id],type:"text",autocomplete:"off",placeholder:e.placeholder,value:i}});s.a.safeType(e.value,"String")&&e.value&&(this.input_values[e.id]=e.value);var r=function(t){a.onValueChange(n,e,t)};n.addEventListener("keydown",r),n.addEventListener("keyup",r),this._dispose.push(function(){n.removeEventListener("keydown",r),n.removeEventListener("keyup",r)});var o=[i=this.createElement("div",{},[n])];if(s.a.safeType(e.action,"Object")){i.classList.add("inline-submittable-input");var l=this.createElement("button",{classes:["submittable-input-submit-button"]},[this.createElement("div",{classes:["submittable-input-loader"]},[this.createElement("div",{classes:["submittable-input-loader-animation"]},[this.createElement("svg",{classes:["submittable-input-loader-icon"],attr:{height:["100%"],width:["100%"],viewBox:["0 0 32 32"]}},[this.createElement("circle",{attr:{cx:"16",cy:"16",fill:"none",r:"14","stroke-width":"2"}}),this.createElement("circle",{attr:{cx:"16",cy:"16",fill:"none",r:"14","stroke-width":"2"}})])])]),this.createElement("svg",{classes:["submittable-input-submit-icon"],attr:{style:"stroke:#fff"}},[this.createElement("path",{attr:{d:"M1.5 13.864L7.864 7.5 1.5 1.136",fill:"none","fill-rule":"evenodd","stroke-width":"2.5"}})])]),p=function(t){a.onAction(l,e)};l.addEventListener("click",p),this._dispose.push(function(){l.removeEventListener("click",p)}),o.push(l)}return i=this.createElement("div",this.getProps(e),[this.createElement("label",{classes:["input-label"],attr:{for:this.id_map[e.id]},text:this.manager.app.getTransMsg(e.label)}),this.createElement("div",{},[this.createElement("div",{classes:["validating-input"]},[this.createElement("div",{},o)])])]),t!=typeof e.save_state&&"failed"==e.save_state&&i.classList.add("invalid"),this.addToComponent(e,i)},a[e].renderTextarea=function(e){var t=this,a=this.createElement("textarea",{attr:{id:this.id_map[e.id],autocomplete:"off",placeholder:e.placeholder},text:e.value});s.a.safeType(e.value,"String")&&e.value&&(this.input_values[e.id]=e.value);var i=function(i){t.onValueChange(a,e,i)};a.addEventListener("change",i),this._dispose.push(function(){a.removeEventListener("change",i)});var n=[this.createElement("div",{},[a])];return n=this.createElement("div",this.getProps(e),[this.createElement("label",{classes:["input-label"],attr:{for:this.id_map[e.id]},text:e.label}),this.createElement("div",{},[this.createElement("div",{classes:["validating-input"]},[this.createElement("div",{},n)])])]),this.addToComponent(e,n)},a[e].renderButton=function(e){if(!e.btn_for||"sales-bot"!==e.btn_for||"thread_message"===this.show_in){var a=t!==typeof e.card_enable&&e.card_enable;return a=this.createElement("div",this.getProps(e),[this.createElement("button",{classes:["button","action-event"+(a?"-enable":""),"button-"+e.style],text:e.label})]),this.addToComponent(e,a)}},a[e].renderSelect=function(e){var t=this;if(!s.a.safeType(e.items,"Undefined")&&s.a.safeType(e.items,"Array")){for(var a=[],n=s.a.safeType(e.value,"String")&&e.value?e.value:"",r=i.m(e.items),o=r.next();!o.done;o=r.next()){var l={text:(o=o.value).label,attr:{value:o.value}};n===o.value&&(l.attr.selected=n),o=this.createElement("option",l),a.push(o)}var p=this.createElement("select",{attr:{id:this.id_map[e.id],type:"text",autocomplete:"off",value:n}},a),c=function(a){t.onValueChange(p,e,a)};return s.a.safeType(e.value,"String")&&e.value&&(this.input_values[e.id]=e.value),p.addEventListener("change",c),this._dispose.push(function(){p.removeEventListener("change",c)}),a=this.createElement("div",{},[this.createElement("div",{classes:["validating-select"]},[p])]),a=this.createElement("div",this.getProps(e),[this.createElement("label",{classes:["input-label"],attr:{for:this.id_map[e.id]},text:e.label}),a]),this.addToComponent(e,a)}},a[e].renderCheckbox=function(e){var t=this;if(!s.a.safeType(e.items,"Undefined")&&s.a.safeType(e.items,"Array")){for(var a=[],n={},r=i.m(e.items),o=r.next();!o.done;n={x$$loop$prop$checkbox_items$39:n.x$$loop$prop$checkbox_items$39,x$$loop$prop$inputKeyFn$40:n.x$$loop$prop$inputKeyFn$40},o=r.next()){o=o.value;var l=this.id_map[e.id+"_"+o.id],p=!s.a.safeType(o.id,"Undefined")&&o.checked,c={attr:{value:o.value,id:l,type:"checkbox"}};p&&(c.attr.checked=p),n.x$$loop$prop$checkbox_items$39=this.createElement("input",c),n.x$$loop$prop$inputKeyFn$40=function(a){return function(i){t.onValueChange(a.x$$loop$prop$checkbox_items$39,e,i)}}(n),p&&(this.input_values[l]=o.value),n.x$$loop$prop$checkbox_items$39.addEventListener("change",n.x$$loop$prop$inputKeyFn$40),this._dispose.push(function(e){return function(){e.x$$loop$prop$checkbox_items$39.removeEventListener("change",e.x$$loop$prop$inputKeyFn$40)}}(n)),o=this.createElement("div",this.getProps(e),[this.createElement("label",{classes:["input-label"],attr:{for:l},text:o.label},[n.x$$loop$prop$checkbox_items$39])]),a.push(o)}return a=this.createElement("div",this.getProps(e),[this.createElement("label",{classes:["input-label"],attr:{for:this.id_map[e.id]},text:e.label}),this.createElement("div",{},[this.createElement("div",{classes:["validating-select"]},[this.createElement("div",{classes:["checkbox-group"]},a)])])]),this.addToComponent(e,a)}},a[e].renderRadio=function(e){var t=this;if(!s.a.safeType(e.items,"Undefined")&&s.a.safeType(e.items,"Array")){for(var a=[],n={},r=i.m(e.items),o=r.next();!o.done;n={x$$loop$prop$radio_items$43:n.x$$loop$prop$radio_items$43,x$$loop$prop$inputKeyFn$44:n.x$$loop$prop$inputKeyFn$44},o=r.next()){o=o.value;var l=!s.a.safeType(o.id,"Undefined")&&o.checked,p={attr:{value:o.value,id:e.id,name:e.id,type:"radio"}};l&&(p.attr.checked=l),n.x$$loop$prop$radio_items$43=this.createElement("input",p),n.x$$loop$prop$inputKeyFn$44=function(a){return function(i){t.onValueChange(a.x$$loop$prop$radio_items$43,e,i)}}(n),l&&(this.input_values[e.id]=o.value),n.x$$loop$prop$radio_items$43.addEventListener("change",n.x$$loop$prop$inputKeyFn$44),this._dispose.push(function(e){return function(){e.x$$loop$prop$radio_items$43.removeEventListener("change",e.x$$loop$prop$inputKeyFn$44)}}(n)),o=this.createElement("div",this.getProps(e),[this.createElement("label",{classes:["input-label"],attr:{},text:o.label},[n.x$$loop$prop$radio_items$43])]),a.push(o)}return a=this.createElement("div",this.getProps(e),[this.createElement("label",{classes:["input-label"],attr:{for:this.id_map[e.id]},text:e.label}),this.createElement("div",{},[this.createElement("div",{classes:["validating-select"]},[this.createElement("div",{classes:["radio-group"]},a)])])]),this.addToComponent(e,a)}},a[e].renderStarRating=function(e){var t=this;if(!s.a.safeType(e.rating,"Undefined")){for(var a=[],i={},n=5<e.rating?5:e.rating;0<n;i={x$$loop$prop$radio_items$47:i.x$$loop$prop$radio_items$47,x$$loop$prop$inputKeyFn$48:i.x$$loop$prop$inputKeyFn$48},n--){var r=!s.a.safeType(e.value,"Undefined")&&e.value,o={attr:{value:n,id:e.id+"-star-"+n,name:e.id,type:"radio",class:"star star-"+n}};r&&e.value==n&&(o.attr.checked=!0),i.x$$loop$prop$radio_items$47=this.createElement("input",o),i.x$$loop$prop$inputKeyFn$48=function(a){return function(i){t.onValueChange(a.x$$loop$prop$radio_items$47,e,i)}}(i),r&&(this.input_values[e.id]=e.value),i.x$$loop$prop$radio_items$47.addEventListener("change",i.x$$loop$prop$inputKeyFn$48),this._dispose.push(function(e){return function(){e.x$$loop$prop$radio_items$47.removeEventListener("change",e.x$$loop$prop$inputKeyFn$48)}}(i)),a.push(i.x$$loop$prop$radio_items$47),r=this.createElement("label",{classes:["input-label"],attr:{for:e.id+"-star-"+n,class:"star star-"+n},text:""}),a.push(r)}return a=this.createElement("div",this.getProps(e),[this.createElement("label",{classes:["input-label","input-label-rating"],attr:{for:this.id_map[e.id]},text:e.label}),this.createElement("div",{},[this.createElement("div",{classes:["star-rating-group"]},[this.createElement("div",{classes:["star"]},a)])])]),this.addToComponent(e,a)}},a[e].renderSpacer=function(e){var t=this.createElement("div",this.getProps(e));return this.addToComponent(e,t)},a[e].renderDivider=function(e){var t=this.createElement("div",this.getProps(e));return this.addToComponent(e,t)},a[e].renderVideo=function(e){var t=this.convertMedia(e.url);return null==t?null:((t=this.createElement("div",this.getProps(e),[this.createElement("div",{classes:["video-wrapper","____video_frame"]},[t.value])])).classList.add("embed-video"),this.addToComponent(e,t))},a[e].renderSocialButton=function(e){var t="";return"f_b"==e.platform&&(t="https://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com%2F"+e.value+"&width&layout=standard&action=like&show_faces=false&height=35"),"t_w"==e.platform&&(t="https://platform.twitter.com/widgets/follow_button.html?screen_name="+e.value+"&amp;show_screen_name=true&amp;show_count=false"),"e_mail"==e.platform&&(t=e.value),"e_mail"!=e.platform?t=this.createElement("div",this.getProps(e),[this.createElement("div",{classes:["social-button-wrapper"]},[this.createElement("iframe",{classes:["____block-iframe"],attr:{src:t,contenteditable:"false",scrolling:"no",frameborder:"0",allowtransparency:"true"}})])]):(t=this.createElement("a",{classes:["____block-iframe email-button"],attr:{href:"mailto:"+t,contenteditable:"false",allowtransparency:"true",target:"_blank"}}),t.innerText="Email",t=this.createElement("div",this.getProps(e),[this.createElement("div",{classes:["____block-iframe","____acquire-email-button"]},[t])])),this.addToComponent(e,t)},a[e].render=function(){var e=[];if(this.block_index=this.manager.getBlockIndex(this),this.components)for(var t=0,a=i.m(this.components),n=a.next();!n.done;n=a.next()){var r=n.value;switch(n=null,0==t&&(r.first_element=!0),t==this.components.length-1&&(r.last_element=!0),r.type){case"text":n=this.renderText(r);break;case"image":n=this.renderImage(r);break;case"list":n=this.renderList(r);break;case"input":n=this.renderInput(r);break;case"button":n=this.renderButton(r);break;case"spacer":n=this.renderSpacer(r);break;case"divider":n=this.renderDivider(r);break;case"single-select":n=this.renderSelect(r);break;case"checkbox":n=this.renderCheckbox(r);break;case"radio":n=this.renderRadio(r);break;case"star-rating":n=this.renderStarRating(r);break;case"textarea":n=this.renderTextarea(r);break;case"video":n=this.renderVideo(r);break;case"social_button":n=this.renderSocialButton(r);break;case"widget_app":if(r.block_data){if(s.a.safeType(r.block_data,"String"))try{r.block_data=JSON.parse(r.block_data)}catch(e){}null!=r.block_data&&(r.block_data.show_in=r.show_in||this.show_in||"outreach",r.block_data&&s.a.safeType(r.block_data.block_id,"Undefined")&&(r.block_data.block_id=r.block_id),r.block_data&&s.a.safeType(r.block_data.messenger_app_id,"Undefined")&&(r.block_data.messenger_app_id=r.messenger_app_id),r.block_data&&s.a.safeType(r.block_data.uri,"Undefined")&&(r.block_data.uri=r.uri),r=this.manager.addBlock(r.block_data))&&((n=this.createElement("div")).classList.add("app_block_canvas",this.c("component")),n.appendChild(r.render()))}}n&&e.push(n),t++}for(t=this.createWrapperElement(),a=(e=i.m(e)).next();!a.done;a=e.next())a=a.value,t.querySelector("."+this.c("component-group")).appendChild(a);return t},n.a=a},452:function(e,t,a){var i=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,n=(e=function(e,t){return function(a){return a.replace(e,t)}})(/((\n\t)(.*))+/g,function(e){return"\n<pre>"+e+"</pre>"}),r=e(/(`)(.*?)\1/g,function(e,t,a){return"<code>"+a+"</code>"}),s=e(/!\[([^\[]+)\]\(([^\)]+)\)/g,function(e,t,a){return'<img src="'+a+'" alt="'+t+'" />'}),o=e(/\[([^\[]+)\]\(([^\)]+)\)/g,function(e,t,a){return""!=a&&i.test(a)?'<a href="'+a+'" target="_blank">'+t+"</a>":t}),l=e(/\n(#+\s*)(.*)/g,function(e,t,a){return"\n<h"+t.trim().length+">"+a+"</h"+t.trim().length+">"}),p=e(/(\*{1,2})(.*?)\1/g,function(e,t,a){return"<"+(1==t.trim().length?"em":"strong")+">"+a+"</"+(1==t.trim().length?"em":"strong")+">"}),c=e(/(~~)(.*?)\1/g,function(e,t,a){return"<del>"+a+"</del>"}),d=e(/\n(&gt;|>)(.*)/g,function(e,t,a){return"\n<blockquote>"+a+"</blockquote>"}),h=e(/\n((\-{3,})|(={3,}))/g,function(e){return"\n<hr />"}),u=e(/(\n\s*(\-|\+)\s.*)+/g,function(e){var t="";return e.trim().split("\n").forEach(function(e){t+="<li>"+e.substring(2)+"</li>"}),"\n<ul>"+t+"</ul>"}),m=e(/(\n\s*([0-9]+\.)\s.*)+/g,function(e){var t="";return e.trim().split("\n").forEach(function(e){t+="<li>"+e.substring(e.indexOf(".")+2)+"</li>"}),"\n<ol>"+t+"</ol>"}),f=e(/\n+(?!<pre>)(?!<h)(?!<ul>)(?!<blockquote)(?!<hr)(?!\t)([^\n]+)\n/g,function(e,t){return"<p>"+t+"</p>"});t.a=function(e){return f(m(u(h(d(c(p(l(o(s(r(n(e))))))))))))}}})}();